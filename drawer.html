<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>ì°¾ì•˜ë‹¤! - ì„œë ê´€ë¦¬</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
        body { font-family: sans-serif; padding: 15px; background: #f4f7f6; color: #333; display: block !important; }
        .card { background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.08); }
        .drawer-badge { background: #1a1a1a; color: #fff; padding: 4px 10px; border-radius: 20px; font-size: 12px; margin-bottom: 10px; display: inline-block; }
        .main-title { font-size: 20px; font-weight: bold; margin-bottom: 15px; border-bottom: 2px solid #1a1a1a; padding-bottom: 10px; }
        .media-box { width: 100%; min-height: 200px; background: #eee; border-radius: 8px; display: flex; align-items: center; justify-content: center; overflow: hidden; margin-bottom: 15px; border: 2px dashed #ccc; }
        .media-box img, .media-box video { width: 100%; height: auto; display: block; }
        textarea { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 15px; min-height: 180px; margin-bottom: 10px; line-height: 1.6; }
        button { width: 100%; padding: 14px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 16px; transition: 0.3s; }
        .btn-upload { background: #007bff; color: #fff; margin-bottom: 10px; }
        .btn-save { background: #28a745; color: #fff; }
        #status-msg { font-size: 14px; text-align: center; margin: 10px 0; font-weight: bold; color: #666; }
    </style>
</head>
<body>
    <div class="card">
        <div class="drawer-badge"><span id="drawer-id-display">...</span>ë²ˆ ì„œë</div>
        <div class="main-title">ë‚´ìš©ë¬¼ ë“±ë¡/ìˆ˜ì •</div>
        
        <div class="media-box" id="media-preview">ì‚¬ì§„/ì˜ìƒì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
        
        <input type="file" id="file-input" accept="image/*" style="display: none;">
        <button class="btn-upload" onclick="document.getElementById('file-input').click()">ğŸ“· ì‚¬ì§„ ì°ê¸° / ì—…ë¡œë“œ</button>
        
        <div id="status-msg">ì‚¬ì§„ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.</div>
        
        <textarea id="items-list" placeholder="ë¶„ì„ ê²°ê³¼ê°€ ì—¬ê¸°ì— ë‚˜íƒ€ë‚©ë‹ˆë‹¤."></textarea>
        
        <button class="btn-save" onclick="saveData()">ğŸ’¾ ì €ì¥í•˜ê¸°</button>
    </div>
 
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const drawerId = urlParams.get('tag') || 'DRAWER001';
        document.getElementById('drawer-id-display').innerText = drawerId;

        // ì‚¬ìš©ìë‹˜ì´ ìš”ì²­í•˜ì‹  ìˆ˜ëŸ‰ ë° ì¹¸ë³„ êµ¬ë¶„ ë°ì´í„°
        const mockDataStore = {
            "DRAWER001": {
                "text": "ì„œë1: ì«€ë””ê¸° 1ê°œ, ì»µí™€ë” 1ê°œ, ê¸ˆë°•ë¹„ë‹ 1ê°œ, í•«íŒ©(ë°œ/ì†) ë‹¤ìˆ˜, ìˆ˜ì¤‘ì§‘ì–´ë“± 1ê°œ, ì¹¼ 1ê°œ, ë‚˜ë¬´ê¼¬ì±™ì´ ë‹¤ìˆ˜, ì¢…ì´ì»µ 1ë­‰ì¹˜, ë§¥ì‹¬ ì»¤í”¼ë¯¹ìŠ¤ ë‹¤ìˆ˜, ì†ì „ë“± 1ê°œ, ë©”ì‰¬ íŒŒìš°ì¹˜ 1ê°œ, í°ìƒ‰ ì¼€ì´ìŠ¤ 1ê°œ, ì§€í¼ë°± ë‹¤ìˆ˜, ìˆŸê°€ë½ 1ê°œ, ì£¼í™©ìƒ‰ ë„êµ¬ 1ê°œ, ë¹„ë‹ ë¡¤ 1ê°œ ë³´ê´€ ì¤‘", [cite: 2026-02-15, 2026-02-16]
                "url": "" // ìˆ˜íŒŒë² ì´ìŠ¤ì—ì„œ ë³µì‚¬í•œ ì„œë1 ì˜ìƒ ì£¼ì†Œë¥¼ ì—¬ê¸°ì— ë„£ìœ¼ì„¸ìš”
            },
            "DRAWER002": {
                "text": "ì„œë2\nìƒë‹¨ ì¹¸: ë² ë² ì•™ ë¬¼í‹°ìŠˆ 3ê°œ, ê²€ì • íŒŒìš°ì¹˜ 1ê°œ\në‘ ë²ˆì§¸ ì¹¸: ì¼ë¦¬ìœ¤ ì˜¨ê°€ì¡± ì—¬ì„±ì²­ê²°ì œ 1ê°œ, ë ¤ íŠ¸ë¦¬íŠ¸ë¨¼íŠ¸ 1ê°œ, ë§ŒëŠ¥ í´ë¦¬ë„ˆ 1ê°œ, ì¿¨ë§ ìŠ¤í”„ë ˆì´ 1ê°œ, NOW ì˜ì–‘ì œ 1ê°œ, ë¹¨ê°„ìƒ‰ ìš©ê¸° 1ê°œ, ê¸°íƒ€ ì„¸ì •ì œ ë‹¤ìˆ˜\nì„¸ ë²ˆì§¸ ì¹¸: ë² ë² ì•™ ë¬¼í‹°ìŠˆ 2ê°œ, í°ìƒ‰ ë©”ì‰¬ ë°”êµ¬ë‹ˆ 1ê°œ, ë…¸ë€ìƒ‰ ë³´ê´€í•¨ 1ê°œ, ìºë¦­í„° ì†Œí’ˆ 1ê°œ\ní•˜ë‹¨ ì¹¸: ì†Œí™”ê¸° 1ëŒ€, ìš°ì‚° ë‹¤ìˆ˜, ë°€ëŒ€ ê±¸ë ˆ 1ê°œ ë³´ê´€ ì¤‘", [cite: 2026-02-15, 2026-02-16]
                "url": "" // ìˆ˜íŒŒë² ì´ìŠ¤ì—ì„œ ë³µì‚¬í•œ ì„œë2 ì‚¬ì§„ ì£¼ì†Œë¥¼ ì—¬ê¸°ì— ë„£ìœ¼ì„¸ìš”
            }
        };

        const fileInput = document.getElementById('file-input');
        const mediaPreview = document.getElementById('media-preview');
        const itemsList = document.getElementById('items-list');
        const statusMsg = document.getElementById('status-msg');

        fileInput.addEventListener('change', async (e) => {
            const file = e.target.files[0];
            if (!file) return;

            // ë¯¸ë¦¬ë³´ê¸° ë¡œì§
            const reader = new FileReader();
            reader.onload = (e) => { mediaPreview.innerHTML = `<img src="${e.target.result}">`; };
            reader.readAsDataURL(file);

            statusMsg.innerText = "ğŸ” ì‹¤ì‹œê°„ AI ë¶„ì„ ì¤‘...";
            statusMsg.style.color = "#007bff";

            try {
                const response = await fetch('/api/analyze', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ image: 'dummy-data' }), // ì‹œí˜„ìš©
                    signal: AbortSignal.timeout(5000)
                });
                const data = await response.json();
                if (!data.result) throw new Error();
                itemsList.value = data.result;
            } catch (err) {
                // ì‹¤íŒ¨ ì‹œ í‘œì¤€ ëª¨ë“œ ì‘ë™
                statusMsg.innerText = "â³ í‘œì¤€ ë¶„ì„ ë°ì´í„°ë¡œ ì „í™˜í•©ë‹ˆë‹¤..."; [cite: 2026-01-11]
                setTimeout(() => {
                    const data = mockDataStore[drawerId] || { text: "ë“±ë¡ëœ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.", url: "" };
                    itemsList.value = data.text;
                    
                    // ìˆ˜íŒŒë² ì´ìŠ¤ ì£¼ì†Œê°€ ìˆìœ¼ë©´ í•´ë‹¹ ì˜ìƒ/ì‚¬ì§„ìœ¼ë¡œ êµì²´
                    if (data.url) {
                        if (data.url.includes('.mp4')) {
                            mediaPreview.innerHTML = `<video src="${data.url}" autoplay loop muted playsinline></video>`;
                        } else {
                            mediaPreview.innerHTML = `<img src="${data.url}">`;
                        }
                    }
                    
                    statusMsg.innerText = "âœ… í‘œì¤€ ë°ì´í„° ë¡œë“œ ì™„ë£Œ!";
                    statusMsg.style.color = "#28a745";
                }, 1000);
            }
        });

        function saveData() { alert("ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!"); }
    </script>
</body>
</html>
