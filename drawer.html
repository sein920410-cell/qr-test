<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>서랍 확인</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #fafafa; }
        .card { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        h1 { font-size: 1.2rem; color: #333; margin-top: 0; }
        ul { padding: 0; list-style: none; }
        li { padding: 10px 0; border-bottom: 1px solid #eee; }
        #media img { width: 100%; border-radius: 8px; margin-bottom: 15px; }
    </style>
</head>
<body>
    <div class="card">
        <div id="media"></div>
        <h1 id="title">정보를 불러오는 중...</h1>
        <ul id="list"></ul>
    </div>

    <script>
        // 사진(image_6b761e.png, image_6b8ce6.png)에서 확인한 실제 정보입니다. [cite: 2026-01-11]
        const S_URL = 'https://tqhtggusphhcsygiitrv.supabase.co';
        const S_KEY = 'sb_publishable_D9nhmN5ZlyApSrHHasyQ3w_O7Kdmssq';
        const supabase = window.supabase.createClient(S_URL, S_KEY);

        // 주소창의 id 값을 가져옵니다. [cite: 2026-02-15]
        const id = new URLSearchParams(window.location.search).get('id');

        async function load() {
            if (!id) { document.getElementById('title').innerText = "ID가 없습니다."; return; }

            const { data, error } = await supabase
                .from('tags')
                .select('display_name, items, media_url')
                .eq('id', id)
                .single();

            if (error || !data) {
                document.getElementById('title').innerText = "정보를 찾을 수 없습니다.";
                return;
            }

            // 서랍 이름 (display_name) 출력 [cite: 2026-02-15]
            document.getElementById('title').innerText = data.display_name || "이름 없음";

            // 물건 목록 (items) 출력 [cite: 2026-02-15]
            if (data.items) {
                const itemList = data.items.split(',');
                document.getElementById('list').innerHTML = itemList.map(i => `<li>${i.trim()}</li>`).join('');
            }

            // 사진 (media_url) 출력 [cite: 2026-02-15]
            if (data.media_url) {
                document.getElementById('media').innerHTML = `<img src="${data.media_url}">`;
            }
        }
        load();
    </script>
</body>
</html>
