<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì°¾ì•˜ë‹¤! - ì„œë ê´€ë¦¬</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        body { font-family: sans-serif; padding: 15px; background: #f4f7f6; color: #333; }
        .card { background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .drawer-badge { background: #1a1a1a; color: #fff; padding: 5px 12px; border-radius: 20px; font-size: 13px; display: inline-block; margin-bottom: 15px; }
        .media-box { width: 100%; min-height: 200px; background: #eee; border-radius: 8px; margin-bottom: 15px; overflow: hidden; display: flex; align-items: center; justify-content: center; }
        .media-box img, .media-box video { width: 100%; height: auto; display: block; }
        textarea { width: 100%; padding: 15px; border: 1px solid #ddd; border-radius: 8px; font-size: 15px; min-height: 250px; line-height: 1.6; box-sizing: border-box; }
        .btn-save { background: #28a745; color: #fff; border: none; padding: 15px; border-radius: 8px; font-weight: bold; width: 100%; margin-top: 15px; cursor: pointer; }
    </style>
</head>
<body>
    <div class="card">
        <div class="drawer-badge"><span id="drawer-id-display">...</span>ë²ˆ ì„œë</div>
        <div class="media-box" id="media-preview">ë¯¸ë””ì–´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
        <textarea id="items-list"></textarea>
        <button class="btn-save" onclick="alert('ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!')">ğŸ’¾ ë³€ê²½ì‚¬í•­ ì €ì¥</button>
    </div>
    <script>
        const SUPABASE_URL = 'https://tqhtggusphhcsygiitrv.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRxaHRnZ3VzcGhoY3N5Z2lpdHJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEwNDMxMTMsImV4cCI6MjA4NjYxOTExM30.HXA2GbucJPkt3LFl9_JpLiwUQvI95QNEDeQWzQ9i-pc';
        const _supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        const urlParams = new URLSearchParams(window.location.search);
        const drawerId = (urlParams.get('tag') || 'DRAWER001').toUpperCase();
        document.getElementById('drawer-id-display').innerText = drawerId;

        const dataStore = {
            "DRAWER001": "ì„œë1 ëª©ë¡:\n- ì«€ë””ê¸° 1ê°œ\n- ì»µí™€ë” 1ê°œ\n- ê¸ˆë°•ë¹„ë‹ 1ê°œ\n- í•«íŒ© ë‹¤ìˆ˜\n- ìˆ˜ì¤‘ì§‘ì–´ë“± 1ê°œ\n- ì¹¼ 1ê°œ\n- ë‚˜ë¬´ê¼¬ì±™ì´ ë‹¤ìˆ˜\n- ì¢…ì´ì»µ 1ë­‰ì¹˜\n- ì»¤í”¼ë¯¹ìŠ¤ ë‹¤ìˆ˜\n- ì†ì „ë“± 1ê°œ",
            "DRAWER002": "ì„œë2 ëª©ë¡:\n[ìƒë‹¨] ë² ë² ì•™ ë¬¼í‹°ìŠˆ 3ê°œ, ê²€ì • íŒŒìš°ì¹˜ 1ê°œ\n[2ë‹¨] ì¼ë¦¬ìœ¤ ì˜¨ê°€ì¡± ì—¬ì„±ì²­ê²°ì œ 1ê°œ, ë ¤ íŠ¸ë¦¬íŠ¸ë¨¼íŠ¸ 1ê°œ, ë§ŒëŠ¥ í´ë¦¬ë„ˆ 1ê°œ, ì¿¨ë§ ìŠ¤í”„ë ˆì´ 1ê°œ, NOW ì˜ì–‘ì œ 1ê°œ\n[3ë‹¨] ë² ë² ì•™ ë¬¼í‹°ìŠˆ 2ê°œ, ë°”êµ¬ë‹ˆ 1ê°œ\n[í•˜ë‹¨] ì†Œí™”ê¸° 1ëŒ€, ìš°ì‚° ë‹¤ìˆ˜, ë°€ëŒ€ ê±¸ë ˆ 1ê°œ"
        };

        window.onload = () => {
            document.getElementById('items-list').value = dataStore[drawerId] || "ì •ë³´ ì—†ìŒ";
            loadMedia();
        };

        async function loadMedia() {
            // ìˆ˜íŒŒë² ì´ìŠ¤ì— ì˜¬ë¦° íŒŒì¼ëª…ê³¼ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤. (drawer1.mp4 / drawer2.jpg)
            const fileName = drawerId === "DRAWER001" ? "drawer1.mp4" : "drawer2.jpg";
            const preview = document.getElementById('media-preview');
            
            const { data } = _supabase.storage.from('user_uploads').getPublicUrl(fileName);
            
            if (data.publicUrl) {
                if (fileName.endsWith('.mp4')) {
                    preview.innerHTML = `<video src="${data.publicUrl}" autoplay loop muted playsinline></video>`;
                } else {
                    preview.innerHTML = `<img src="${data.publicUrl}" onerror="this.parentElement.innerHTML='íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. (íŒŒì¼ëª… í™•ì¸ í•„ìš”)'">`;
                }
            }
        }
    </script>
</body>
</html>
