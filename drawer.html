// 영상 보관함 및 영상 촬영 지원 (accept 보강)
        async function analyzeMedia() {
            const input = document.createElement('input');
            input.type = 'file'; 
            // 영상(video/*)과 사진(image/*)을 명확하게 동시 요청
            // 아이폰 시스템 메뉴 이름은 '사진 보관함'으로 뜨더라도 실제로는 영상 선택이 가능합니다.
            input.accept = 'video/*,image/*'; 
            
            input.onchange = (e) => {
                const file = e.target.files[0];
                if (!file) return;
                selectedFile = file;
                const reader = new FileReader();
                reader.onload = (re) => {
                    const previewWrap = document.getElementById('preview-wrap');
                    // 파일 타입에 따라 미리보기 태그 결정
                    if (file.type.startsWith('video/')) {
                        previewWrap.innerHTML = `<video id="edit-preview" src="${re.target.result}" style="max-width:100%; max-height:100%;" muted autoplay loop></video>`;
                    } else {
                        previewWrap.innerHTML = `<img id="edit-preview" src="${re.target.result}" style="max-width:100%; max-height:100%;">`;
                    }
                    currentRotation = 0;
                    document.getElementById('rotate-window').style.display = 'flex';
                };
                reader.readAsDataURL(file);
            };
            input.click();
        }
