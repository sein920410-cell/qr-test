const supabaseUrl = 'https://tqhtggusphhcsygiitrv.supabase.co';
const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRxaHRnZ3VzcGhoY3N5Z2lpdHJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEwNDMxMTMsImV4cCI6MjA4NjYxOTExM30.HXA2GbucJPkt3LFl9_JpLiwUQvI95QNEDeQWzQ9i-pc';
const supabase = supabase.createClient(supabaseUrl, supabaseKey);

async function loadDrawerData() {
    const urlParams = new URLSearchParams(window.location.search);
    const drawerId = urlParams.get('id');

    const { data, error } = await supabase
        .from('items')
        .select('*')
        .eq('drawer_no', drawerId);

    if (data && data.length > 0) {
        // 사진 및 영상 우선 노출
        document.querySelector('video').src = data[0].video_url;
        document.querySelector('img').src = data[0].image_url;

        // 물품 체크리스트 생성
        const list = document.getElementById('checklist');
        list.innerHTML = data.map(item => `
            <li><input type="checkbox"> ${item.product_name}</li>
        `).join('');
    }
}
loadDrawerData();
