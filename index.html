<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì„œë ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <style>
        body { font-family: sans-serif; padding: 20px; line-height: 1.6; }
        .search-box { width: 100%; padding: 12px; font-size: 16px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        .result-item { margin-top: 15px; padding: 15px; border: 1px solid #eee; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; }
        .result-item strong { color: #007bff; }
        button { padding: 8px 15px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h2>ğŸ” ë¬´ì—‡ì„ ì°¾ìœ¼ì‹œë‚˜ìš”?</h2>
    <input type="text" id="searchInput" class="search-box" placeholder="ë¬¼ê±´ ì´ë¦„ì„ 2ì ì´ìƒ ì…ë ¥í•˜ì„¸ìš”" onkeyup="handleSearch()">
    <div id="resultList"></div>

    <script>
        const supabaseUrl = 'https://tqhtggusphhcsygiitrv.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRxaHRnZ3VzcGhoY3N5Z2lpdHJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEwNDMxMTMsImV4cCI6MjA4NjYxOTExM30.HXA2GbucJPkt3LFl9_JpLiwUQvI95QNEDeQWzQ9i-pc';
        const supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);

        async function handleSearch() {
            const query = document.getElementById('searchInput').value;
            const resultList = document.getElementById('resultList');
            resultList.innerHTML = '';

            if (query.length >= 2) { [cite: 2026-02-16]
                const { data, error } = await supabaseClient
                    .from('items') [cite: 2026-02-15]
                    .select('*')
                    .ilike('product_name', `%${query}%`); [cite: 2026-02-16]

                if (data) {
                    data.forEach(item => {
                        const div = document.createElement('div');
                        div.className = 'result-item';
                        // [ë¬¼ê±´ëª…] â†’ [ì„œëë²ˆí˜¸ + ìƒì„¸ìœ„ì¹˜] í˜•ì‹ [cite: 2026-02-16]
                        div.innerHTML = `
                            <span>ğŸ“¦ ${item.product_name} â†’ <strong>${item.drawer_no}ë²ˆ ì„œë ${item.position || ''}</strong></span>
                            <button onclick="location.href='drawer.html?id=${item.drawer_no}'">ìƒì„¸ë³´ê¸°</button>
                        `;
                        resultList.appendChild(div);
                    });
                }
            }
        }
    </script>
</body>
</html>
